
#include <stdio.h>
#include "NUC100Series.h"
#include "LCD.h"
#include <stdint.h>
#include <math.h>
#include "Setup.h"
/*
#define TMR0_COUNTS 1000
#define HXT_STATUS 1<<0
#define PLL_STATUS 1<<2
*/


extern unsigned char amogus[32*32] = {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xFC,0xFE,0xFE,0x3E,0x3E,0x3C,0x38,0x70,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xF8,0xF8,0xFC,0xFC,0xDC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0xC0,0xC0,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x98,0x9F,0x9F,0x9F,0x9F,0x9F,0x9F,0x9F,0x9F,0x9F,0x90,0x80,0x80,0x80,0x80,0x80,0x80,0x80};


int main(){
	System_config();
	SPI3_config();
	
	LCD_start();
	LCD_clear();
	
	PB->PMD &= (~(0x03<<30)); // enable GPB15 (the button)
	
	PC->DOUT |= (1<<7);     //Logic 1 to turn on the digit
	PC->DOUT &= ~(1<<6);		//SC3
	PC->DOUT &= ~(1<<5);		//SC2
	PC->DOUT &= ~(1<<4);		//SC1
	
	enable_TMR0();
	/*
	GPB15 shooting
	*/
	PB->PMD &= ~(0b11 << 30);
	//PB->PMD |= 0b << 30; 
	PB->OFFD &= ~(1 << 15);
	PB->DBEN &= ~(1 << 15);
	PB->DBEN |= (1 << 15); // debounce enable
	PB->PMD &= (~(0x03 << 30)); // GPIOB.15 is configured as input
	PB->IMD &= (~(1 << 15)); 		// Detect edge-trigger interrupt 
	PB->IEN |= (1 << 15); 			// Enable interrupt (falling edge-trigger)
	
	while(1){																
		
		printS_5x7(4, 10, "Battleship");
		printS_5x7(4, 18, "By hehe");
		draw_Bmp32x32(4, 30, 1, 0, amogus); 
		
		
	}
}



